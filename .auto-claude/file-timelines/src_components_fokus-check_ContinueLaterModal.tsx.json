{
  "file_path": "src/components/fokus-check/ContinueLaterModal.tsx",
  "main_branch_history": [],
  "task_views": {
    "011-remove-or-conditionally-disable-console-logging-in": {
      "task_id": "011-remove-or-conditionally-disable-console-logging-in",
      "branch_point": {
        "commit_hash": "e327d25e2edeee628d7c36f91d94a613ea200851",
        "content": "'use client';\n\nimport { useState, useCallback } from 'react';\nimport { Button } from '@/components/ui/Button';\n\ninterface ContinueLaterModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n  onSubmit: (data: { email?: string; phone?: string }) => Promise<void>;\n  userName: string;\n  questionNumber: number;\n  totalQuestions: number;\n}\n\nexport function ContinueLaterModal({\n  isOpen,\n  onClose,\n  onSubmit,\n  userName,\n  questionNumber,\n  totalQuestions,\n}: ContinueLaterModalProps) {\n  const [email, setEmail] = useState('');\n  const [phone, setPhone] = useState('');\n  const [isSubmitting, setIsSubmitting] = useState(false);\n  const [isSubmitted, setIsSubmitted] = useState(false);\n  const [error, setError] = useState('');\n  const [deliveryMethod, setDeliveryMethod] = useState<'email' | 'whatsapp' | null>(null);\n\n  const formatPhoneNumber = (value: string) => {\n    let cleaned = value.replace(/[^\\d+]/g, '');\n    if (cleaned.startsWith('0')) {\n      cleaned = '+49' + cleaned.slice(1);\n    }\n    if (cleaned && !cleaned.startsWith('+')) {\n      cleaned = '+49' + cleaned;\n    }\n    return cleaned;\n  };\n\n  const handlePhoneChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    setPhone(formatPhoneNumber(e.target.value));\n    setError('');\n  };\n\n  const validateEmail = (email: string) => {\n    return /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/.test(email);\n  };\n\n  const validatePhone = (phone: string) => {\n    return phone.length >= 11 && phone.startsWith('+');\n  };\n\n  const handleSubmit = useCallback(\n    async (e: React.FormEvent) => {\n      e.preventDefault();\n      setError('');\n\n      // Validate based on delivery method\n      if (deliveryMethod === 'email' && !validateEmail(email)) {\n        setError('Bitte gib eine g\u00fcltige E-Mail-Adresse ein.');\n        return;\n      }\n      if (deliveryMethod === 'whatsapp' && !validatePhone(phone)) {\n        setError('Bitte gib eine g\u00fcltige Telefonnummer ein.');\n        return;\n      }\n      if (!deliveryMethod) {\n        setError('Bitte w\u00e4hle eine Zustellmethode.');\n        return;\n      }\n\n      setIsSubmitting(true);\n\n      try {\n        await onSubmit({\n          email: deliveryMethod === 'email' ? email.trim().toLowerCase() : undefined,\n          phone: deliveryMethod === 'whatsapp' ? phone : undefined,\n        });\n        setIsSubmitted(true);\n      } catch (err) {\n        console.error('Error saving progress:', err);\n        setError('Es ist ein Fehler aufgetreten. Bitte versuche es sp\u00e4ter erneut.');\n      } finally {\n        setIsSubmitting(false);\n      }\n    },\n    [email, phone, deliveryMethod, onSubmit]\n  );\n\n  if (!isOpen) return null;\n\n  // Success screen\n  if (isSubmitted) {\n    return (\n      <div className=\"fixed inset-0 z-50 flex items-center justify-center\">\n        <div className=\"absolute inset-0 bg-black/70 backdrop-blur-sm\" onClick={onClose} />\n        <div className=\"relative bg-[var(--bg-dark-card)] rounded-3xl p-8 max-w-md mx-4 border border-[var(--accent)]/30 shadow-2xl animate-fade-in\">\n          <div className=\"text-center\">\n            <div className=\"w-16 h-16 mx-auto mb-4 rounded-full bg-[var(--accent)]/10 flex items-center justify-center\">\n              <svg\n                className=\"w-8 h-8 text-[var(--accent)]\"\n                fill=\"none\"\n                stroke=\"currentColor\"\n                viewBox=\"0 0 24 24\"\n              >\n                <path\n                  strokeLinecap=\"round\"\n                  strokeLinejoin=\"round\"\n                  strokeWidth={2}\n                  d=\"M5 13l4 4L19 7\"\n                />\n              </svg>\n            </div>\n\n            <h3 className=\"text-2xl font-bold text-[var(--text-light)] mb-2\">\n              Link unterwegs!\n            </h3>\n\n            <p className=\"text-[var(--text-muted)] mb-6\">\n              {deliveryMethod === 'email'\n                ? `Wir haben Dir einen Link an ${email} geschickt.`\n                : `Du erh\u00e4ltst gleich eine WhatsApp mit Deinem Fortsetzungs-Link.`}\n            </p>\n\n            <p className=\"text-sm text-[var(--text-muted)]\">\n              Der Link ist <span className=\"text-[var(--accent)]\">7 Tage</span> g\u00fcltig.\n            </p>\n\n            <Button onClick={onClose} variant=\"secondary\" size=\"lg\" className=\"w-full mt-6\">\n              Alles klar\n            </Button>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"fixed inset-0 z-50 flex items-center justify-center\">\n      <div className=\"absolute inset-0 bg-black/70 backdrop-blur-sm\" onClick={onClose} />\n\n      <div className=\"relative bg-[var(--bg-dark-card)] rounded-3xl p-8 max-w-md mx-4 border border-[var(--accent)]/30 shadow-2xl animate-fade-in\">\n        {/* Close button */}\n        <button\n          onClick={onClose}\n          className=\"absolute top-4 right-4 text-[var(--text-muted)] hover:text-[var(--text-light)] transition-colors\"\n          aria-label=\"Schlie\u00dfen\"\n        >\n          <svg className=\"w-6 h-6\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n            <path\n              strokeLinecap=\"round\"\n              strokeLinejoin=\"round\"\n              strokeWidth={2}\n              d=\"M6 18L18 6M6 6l12 12\"\n            />\n          </svg>\n        </button>\n\n        <div className=\"text-center mb-6\">\n          <div className=\"w-16 h-16 mx-auto mb-4 rounded-full bg-[var(--accent)]/10 flex items-center justify-center\">\n            <span className=\"text-3xl\">\ud83d\udce9</span>\n          </div>\n\n          <h3 className=\"text-2xl font-bold text-[var(--text-light)] mb-2\">\n            Sp\u00e4ter weitermachen?\n          </h3>\n\n          <p className=\"text-[var(--text-muted)]\">\n            {userName ? `Hey ${userName}, ` : ''}Wir schicken Dir einen Link, mit dem Du\n            bei <span className=\"text-[var(--accent)]\">Frage {questionNumber}/{totalQuestions}</span> weitermachen kannst.\n          </p>\n        </div>\n\n        <form onSubmit={handleSubmit} className=\"space-y-4\">\n          {/* Delivery Method Selection */}\n          <div className=\"grid grid-cols-2 gap-3\">\n            <button\n              type=\"button\"\n              onClick={() => {\n                setDeliveryMethod('email');\n                setError('');\n              }}\n              className={`p-4 rounded-xl border transition-all flex flex-col items-center gap-2 ${\n                deliveryMethod === 'email'\n                  ? 'border-[var(--accent)] bg-[var(--accent)]/10 text-[var(--text-light)]'\n                  : 'border-[var(--text-muted)]/20 text-[var(--text-muted)] hover:border-[var(--text-muted)]/40'\n              }`}\n            >\n              <svg className=\"w-6 h-6\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                <path\n                  strokeLinecap=\"round\"\n                  strokeLinejoin=\"round\"\n                  strokeWidth={2}\n                  d=\"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z\"\n                />\n              </svg>\n              <span className=\"text-sm font-medium\">E-Mail</span>\n            </button>\n\n            <button\n              type=\"button\"\n              onClick={() => {\n                setDeliveryMethod('whatsapp');\n                setError('');\n              }}\n              className={`p-4 rounded-xl border transition-all flex flex-col items-center gap-2 ${\n                deliveryMethod === 'whatsapp'\n                  ? 'border-[var(--accent)] bg-[var(--accent)]/10 text-[var(--text-light)]'\n                  : 'border-[var(--text-muted)]/20 text-[var(--text-muted)] hover:border-[var(--text-muted)]/40'\n              }`}\n            >\n              <svg className=\"w-6 h-6\" fill=\"currentColor\" viewBox=\"0 0 24 24\">\n                <path d=\"M.057 24l1.687-6.163c-1.041-1.804-1.588-3.849-1.587-5.946.003-6.556 5.338-11.891 11.893-11.891 3.181.001 6.167 1.24 8.413 3.488 2.245 2.248 3.481 5.236 3.48 8.414-.003 6.557-5.338 11.892-11.893 11.892-1.99-.001-3.951-.5-5.688-1.448l-6.305 1.654zm6.597-3.807c1.676.995 3.276 1.591 5.392 1.592 5.448 0 9.886-4.434 9.889-9.885.002-5.462-4.415-9.89-9.881-9.892-5.452 0-9.887 4.434-9.889 9.884-.001 2.225.651 3.891 1.746 5.634l-.999 3.648 3.742-.981z\" />\n              </svg>\n              <span className=\"text-sm font-medium\">WhatsApp</span>\n            </button>\n          </div>\n\n          {/* Email Input */}\n          {deliveryMethod === 'email' && (\n            <div>\n              <input\n                type=\"email\"\n                value={email}\n                onChange={(e) => {\n                  setEmail(e.target.value);\n                  setError('');\n                }}\n                placeholder=\"deine@email.de\"\n                className=\"w-full px-4 py-3 bg-[var(--bg-dark)] border border-[var(--text-muted)]/20 rounded-xl text-[var(--text-light)] placeholder:text-[var(--text-muted)]/50 focus:outline-none focus:border-[var(--accent)] focus:ring-2 focus:ring-[var(--accent)]/20 transition-all\"\n                autoFocus\n              />\n            </div>\n          )}\n\n          {/* Phone Input */}\n          {deliveryMethod === 'whatsapp' && (\n            <div>\n              <input\n                type=\"tel\"\n                value={phone}\n                onChange={handlePhoneChange}\n                placeholder=\"+49 170 1234567\"\n                className=\"w-full px-4 py-3 bg-[var(--bg-dark)] border border-[var(--text-muted)]/20 rounded-xl text-[var(--text-light)] placeholder:text-[var(--text-muted)]/50 focus:outline-none focus:border-[var(--accent)] focus:ring-2 focus:ring-[var(--accent)]/20 transition-all\"\n                autoFocus\n              />\n            </div>\n          )}\n\n          {/* Error */}\n          {error && (\n            <p className=\"text-red-400 text-sm flex items-center gap-2\">\n              <svg className=\"w-4 h-4\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n                <path\n                  fillRule=\"evenodd\"\n                  d=\"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z\"\n                  clipRule=\"evenodd\"\n                />\n              </svg>\n              {error}\n            </p>\n          )}\n\n          <Button\n            type=\"submit\"\n            variant=\"primary\"\n            size=\"lg\"\n            disabled={!deliveryMethod || isSubmitting}\n            className=\"w-full\"\n          >\n            {isSubmitting ? 'Wird gesendet...' : 'Link senden'}\n          </Button>\n        </form>\n\n        <p className=\"mt-4 text-center text-xs text-[var(--text-muted)]\">\n          Kein Spam. Der Link ist 7 Tage g\u00fcltig.\n        </p>\n      </div>\n    </div>\n  );\n}\n",
        "timestamp": "2025-12-28T13:46:12.464327"
      },
      "worktree_state": null,
      "task_intent": {
        "title": "011-remove-or-conditionally-disable-console-logging-in",
        "description": "Create a centralized logging utility that conditionally disables console output in production, replace all 31 console.log/error/warn statements across 7 source files with the logger utility.",
        "from_plan": true
      },
      "commits_behind_main": 0,
      "status": "active",
      "merged_at": null
    }
  },
  "created_at": "2025-12-28T13:38:23.657739",
  "last_updated": "2025-12-28T13:46:12.549974"
}