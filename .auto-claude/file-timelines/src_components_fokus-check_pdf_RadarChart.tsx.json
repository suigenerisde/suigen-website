{
  "file_path": "src/components/fokus-check/pdf/RadarChart.tsx",
  "main_branch_history": [],
  "task_views": {
    "004-dynamic-import-react-pdf-renderer-to-reduce-client": {
      "task_id": "004-dynamic-import-react-pdf-renderer-to-reduce-client",
      "branch_point": {
        "commit_hash": "8c857a61678b06a3be491f34e522781921073c74",
        "content": "import { Svg, Path, Circle, Text, G, Line } from '@react-pdf/renderer';\n\ninterface RadarChartProps {\n  data: {\n    label: string;\n    value: number; // 0-5\n    maxValue: number;\n  }[];\n  size?: number;\n  color?: string;\n  backgroundColor?: string;\n  gridColor?: string;\n  labelColor?: string;\n}\n\n// Berechnet Punkt auf dem Radar f\u00fcr gegebenen Winkel und Radius\nconst polarToCartesian = (\n  centerX: number,\n  centerY: number,\n  radius: number,\n  angleInDegrees: number\n): { x: number; y: number } => {\n  const angleInRadians = ((angleInDegrees - 90) * Math.PI) / 180;\n  return {\n    x: centerX + radius * Math.cos(angleInRadians),\n    y: centerY + radius * Math.sin(angleInRadians),\n  };\n};\n\n// Erstellt einen Polygon-Pfad aus Punkten\nconst createPolygonPath = (points: { x: number; y: number }[]): string => {\n  if (points.length === 0) return '';\n  const pathParts = points.map((p, i) => `${i === 0 ? 'M' : 'L'} ${p.x} ${p.y}`);\n  return pathParts.join(' ') + ' Z';\n};\n\nexport function RadarChart({\n  data,\n  size = 200,\n  color = '#14b8a6',\n  backgroundColor = '#14b8a620',\n  gridColor = '#8896a6',\n  labelColor = '#8896a6',\n}: RadarChartProps) {\n  // ViewBox etwas gr\u00f6\u00dfer f\u00fcr Label-Platz, aber Chart f\u00fcllt Container besser\n  const padding = 30; // Reduziertes Padding\n  const viewBoxSize = size + padding * 2;\n  const center = viewBoxSize / 2;\n  const radius = size * 0.38; // Gr\u00f6\u00dferer Chart-Radius\n  const labelRadius = size * 0.48; // Labels knapp au\u00dferhalb\n  const numAxes = data.length;\n  const angleStep = 360 / numAxes;\n\n  // Grid-Ringe (5 Stufen f\u00fcr Werte 1-5)\n  const gridLevels = [0.2, 0.4, 0.6, 0.8, 1.0];\n\n  // Punkte f\u00fcr jeden Grid-Ring berechnen\n  const gridPaths = gridLevels.map((level) => {\n    const points = data.map((_, i) => {\n      const angle = i * angleStep;\n      return polarToCartesian(center, center, radius * level, angle);\n    });\n    return createPolygonPath(points);\n  });\n\n  // Achsenlinien\n  const axisLines = data.map((_, i) => {\n    const angle = i * angleStep;\n    const endPoint = polarToCartesian(center, center, radius, angle);\n    return { x1: center, y1: center, x2: endPoint.x, y2: endPoint.y };\n  });\n\n  // Datenpunkte berechnen\n  const dataPoints = data.map((item, i) => {\n    const angle = i * angleStep;\n    const normalizedValue = item.value / item.maxValue;\n    return polarToCartesian(center, center, radius * normalizedValue, angle);\n  });\n  const dataPath = createPolygonPath(dataPoints);\n\n  // Label-Positionen\n  const labelPositions = data.map((item, i) => {\n    const angle = i * angleStep;\n    const pos = polarToCartesian(center, center, labelRadius, angle);\n\n    // Text-Anchor basierend auf Position\n    let textAnchor: 'start' | 'middle' | 'end' = 'middle';\n    if (pos.x < center - 10) textAnchor = 'end';\n    else if (pos.x > center + 10) textAnchor = 'start';\n\n    return { ...pos, label: item.label, textAnchor, value: item.value };\n  });\n\n  return (\n    <Svg width={size} height={size} viewBox={`0 0 ${viewBoxSize} ${viewBoxSize}`}>\n      {/* Grid-Ringe */}\n      <G>\n        {gridPaths.map((path, i) => (\n          <Path\n            key={`grid-${i}`}\n            d={path}\n            fill=\"none\"\n            stroke={gridColor}\n            strokeWidth={0.5}\n            strokeOpacity={0.3}\n          />\n        ))}\n      </G>\n\n      {/* Achsenlinien */}\n      <G>\n        {axisLines.map((line, i) => (\n          <Line\n            key={`axis-${i}`}\n            x1={line.x1}\n            y1={line.y1}\n            x2={line.x2}\n            y2={line.y2}\n            stroke={gridColor}\n            strokeWidth={0.5}\n            strokeOpacity={0.4}\n          />\n        ))}\n      </G>\n\n      {/* Datenfl\u00e4che */}\n      <Path\n        d={dataPath}\n        fill={color}\n        fillOpacity={0.15}\n        stroke={color}\n        strokeWidth={2}\n      />\n\n      {/* Datenpunkte */}\n      <G>\n        {dataPoints.map((point, i) => (\n          <Circle\n            key={`point-${i}`}\n            cx={point.x}\n            cy={point.y}\n            r={4}\n            fill={color}\n          />\n        ))}\n      </G>\n\n      {/* Labels */}\n      <G>\n        {labelPositions.map((pos, i) => (\n          <Text\n            key={`label-${i}`}\n            x={pos.x}\n            y={pos.y + 3}\n            style={{\n              fontSize: 8,\n              fill: labelColor,\n              textAnchor: pos.textAnchor,\n            }}\n          >\n            {pos.label}\n          </Text>\n        ))}\n      </G>\n\n      {/* Werte an den Punkten */}\n      <G>\n        {dataPoints.map((point, i) => (\n          <Text\n            key={`value-${i}`}\n            x={point.x}\n            y={point.y - 8}\n            style={{\n              fontSize: 7,\n              fill: color,\n              textAnchor: 'middle',\n              fontWeight: 'bold',\n            }}\n          >\n            {data[i].value}\n          </Text>\n        ))}\n      </G>\n    </Svg>\n  );\n}\n",
        "timestamp": "2025-12-28T11:56:41.574188"
      },
      "worktree_state": null,
      "task_intent": {
        "title": "004-dynamic-import-react-pdf-renderer-to-reduce-client",
        "description": "The @react-pdf/renderer package (~400KB) is currently bundled with client-side code even though it's only used in the server-side API route. Using dynamic imports would ensure this heavy package is only loaded when needed on the server.",
        "from_plan": true
      },
      "commits_behind_main": 0,
      "status": "active",
      "merged_at": null
    }
  },
  "created_at": "2025-12-28T11:56:24.833257",
  "last_updated": "2025-12-28T11:56:41.889585"
}