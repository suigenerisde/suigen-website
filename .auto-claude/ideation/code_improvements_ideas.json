{
  "code_improvements": [
    {
      "id": "ci-001",
      "type": "code_improvements",
      "title": "Extract Reusable Modal Component",
      "description": "Create a generic Modal component that can be reused across the application. Both ContinueLaterModal and ExitIntentPopup share the same modal structure: backdrop with blur, centered content card, close button, and animation. Extracting this pattern would reduce code duplication and ensure consistent modal behavior.",
      "rationale": "The code reveals two modal implementations (ContinueLaterModal.tsx and ExitIntentPopup.tsx) with nearly identical modal structure: fixed positioning, backdrop overlay with blur, rounded card styling, close button placement, and animate-fade-in animation. This is a clear pattern that can be consolidated.",
      "builds_upon": ["ContinueLaterModal component", "ExitIntentPopup component", "Button component"],
      "estimated_effort": "small",
      "affected_files": [
        "src/components/ui/Modal.tsx",
        "src/components/fokus-check/ContinueLaterModal.tsx",
        "src/components/fokus-check/ExitIntentPopup.tsx"
      ],
      "existing_patterns": [
        "Modal backdrop: bg-black/70 backdrop-blur-sm",
        "Modal card: bg-[var(--bg-dark-card)] rounded-3xl border border-[var(--accent)]/30",
        "Close button positioning: absolute top-4 right-4",
        "Animation: animate-fade-in"
      ],
      "implementation_approach": "1. Create new Modal.tsx in src/components/ui/ with props for isOpen, onClose, size, and children. 2. Copy the shared modal structure (backdrop, card, close button) from existing modals. 3. Refactor ContinueLaterModal to use Modal as wrapper, keeping only the form content. 4. Refactor ExitIntentPopup to use Modal as wrapper, keeping only the dynamic content logic.",
      "status": "draft",
      "created_at": "2025-12-28T00:30:00.000Z"
    },
    {
      "id": "ci-002",
      "type": "code_improvements",
      "title": "Add Loading State to Button Component",
      "description": "Enhance the Button component with a built-in loading state that displays a spinner and disables interaction. Currently, loading states are handled inline in components like DeliveryChoice with 'Wird gesendet...' text. A standardized loading prop would ensure consistent loading UX across all buttons.",
      "rationale": "The Button component already has a disabled state with styling (opacity-50 cursor-not-allowed). Multiple components (DeliveryChoice, ContinueLaterModal, AccessRequestForm) implement loading states manually. The infrastructure for disabled states exists and can be extended to loading states.",
      "builds_upon": ["Button component", "Existing disabled state pattern"],
      "estimated_effort": "trivial",
      "affected_files": [
        "src/components/ui/Button.tsx",
        "src/components/fokus-check/DeliveryChoice.tsx",
        "src/components/fokus-check/ContinueLaterModal.tsx",
        "src/components/fokus-check/AccessRequestForm.tsx"
      ],
      "existing_patterns": [
        "Button disabled styling: opacity-50 cursor-not-allowed",
        "Inline loading text: isSubmitting ? 'Wird gesendet...' : 'Link senden'",
        "SVG icons already used in buttons for checkmarks"
      ],
      "implementation_approach": "1. Add 'loading' and 'loadingText' props to ButtonProps interface. 2. When loading=true, render a spinner SVG before children (similar to existing checkmark SVGs). 3. Apply disabled styling automatically when loading. 4. Optionally show loadingText instead of children. 5. Update DeliveryChoice, ContinueLaterModal, AccessRequestForm to use loading prop instead of inline handling.",
      "status": "draft",
      "created_at": "2025-12-28T00:30:00.000Z"
    },
    {
      "id": "ci-003",
      "type": "code_improvements",
      "title": "Add Keyboard Navigation to FAQ Accordion",
      "description": "Enhance the FAQ component with keyboard navigation support. Users should be able to navigate between FAQ items using arrow keys and toggle items with Enter/Space. This follows accessibility best practices for accordion components.",
      "rationale": "The FAQ component has onClick handlers for toggling items but lacks keyboard support. The pattern for handling keyboard events exists in other components (e.g., form inputs). Adding keyboard navigation would improve accessibility without significant code changes.",
      "builds_upon": ["FAQ component", "Existing onClick handler pattern"],
      "estimated_effort": "trivial",
      "affected_files": [
        "src/components/sections/FAQ.tsx"
      ],
      "existing_patterns": [
        "FAQ accordion toggle: onClick={() => setOpenIndex(openIndex === index ? null : index)}",
        "Button element with hover transitions",
        "Focus ring styling exists in Button component"
      ],
      "implementation_approach": "1. Add tabIndex={0} to FAQ item buttons. 2. Add onKeyDown handler to check for Enter/Space (toggle) and ArrowUp/ArrowDown (navigate). 3. Track focused index state. 4. Add focus styling using existing focus:ring pattern from Button component. 5. Add aria-expanded and aria-controls attributes for screen readers.",
      "status": "draft",
      "created_at": "2025-12-28T00:30:00.000Z"
    },
    {
      "id": "ci-004",
      "type": "code_improvements",
      "title": "Extend Analytics Tracking to All Pages",
      "description": "Extend the existing Supabase tracking system to track page views and CTA clicks across all pages, not just the fokus-check quiz. This would provide valuable analytics about user journey through the website.",
      "rationale": "The events.ts module has a comprehensive tracking system (trackEvent, session management, Supabase integration) that currently only tracks fokus-check events. The infrastructure is ready to track additional event types. The EventType union and trackEvent function can easily be extended.",
      "builds_upon": ["events.ts tracking system", "Supabase client", "Session management"],
      "estimated_effort": "small",
      "affected_files": [
        "src/lib/tracking/events.ts",
        "src/types/fokus-check.ts",
        "src/app/layout.tsx",
        "src/components/sections/CTA.tsx",
        "src/components/layout/Header.tsx"
      ],
      "existing_patterns": [
        "trackEvent function with eventType and eventData",
        "Session ID management via sessionStorage",
        "Supabase configuration check: isSupabaseConfigured()",
        "trackCtaClicked function exists but is quiz-specific"
      ],
      "implementation_approach": "1. Add new EventTypes: 'page_viewed', 'cta_clicked_global', 'nav_clicked'. 2. Create trackPageView(pathname) function following trackCheckStarted pattern. 3. Create usePageTracking hook that calls trackPageView on route change. 4. Add hook to layout.tsx. 5. Update CTA and Header components to track clicks using trackCtaClicked pattern.",
      "status": "draft",
      "created_at": "2025-12-28T00:30:00.000Z"
    },
    {
      "id": "ci-005",
      "type": "code_improvements",
      "title": "Add Skip-to-Content Link for Accessibility",
      "description": "Add a visually hidden skip-to-content link at the beginning of the Header component that becomes visible on focus. This allows keyboard users to skip navigation and jump directly to main content, following WCAG accessibility guidelines.",
      "rationale": "The Header component has comprehensive navigation with multiple links. Keyboard users must tab through all nav items to reach main content. Skip links are a standard accessibility pattern that can be implemented with the existing Tailwind CSS utilities already used in the project.",
      "builds_upon": ["Header component", "Existing CSS transition patterns"],
      "estimated_effort": "trivial",
      "affected_files": [
        "src/components/layout/Header.tsx",
        "src/app/layout.tsx"
      ],
      "existing_patterns": [
        "Header fixed positioning and z-index handling",
        "Tailwind transition classes: transition-all duration-300",
        "Focus ring styling: focus:ring-2 focus:ring-offset-2",
        "sr-only utility for screen reader text"
      ],
      "implementation_approach": "1. Add a visually hidden anchor link as first child of Header. 2. Style with sr-only class by default, visible on focus. 3. Link to #main-content anchor. 4. Add id='main-content' to main element in layout.tsx or page components. 5. Add focus styling to make skip link visible when tabbed to.",
      "status": "draft",
      "created_at": "2025-12-28T00:30:00.000Z"
    }
  ]
}
